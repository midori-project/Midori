{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://midori.dev/schemas/question.schema.json",
  "title": "Question Schema",
  "description": "Schema สำหรับ questions และ questionnaires",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique question identifier"
    },
    "setId": {
      "type": "string",
      "description": "Question set identifier"
    },
    "type": {
      "type": "string",
      "enum": ["multiple_choice", "text_input", "boolean", "range", "file_upload", "textarea", "email", "url"],
      "description": "Type of question"
    },
    "category": {
      "type": "string",
      "enum": ["basic_info", "design_preferences", "functionality", "content", "technical", "business"],
      "description": "Question category"
    },
    "priority": {
      "type": "number",
      "minimum": 1,
      "maximum": 10,
      "description": "Question priority (1=lowest, 10=highest)"
    },
    "required": {
      "type": "boolean",
      "default": false,
      "description": "Whether this question is required"
    },
    "text": {
      "type": "object",
      "properties": {
        "th": { "type": "string" },
        "en": { "type": "string" }
      },
      "required": ["th"],
      "description": "Question text in multiple languages"
    },
    "description": {
      "type": "object",
      "properties": {
        "th": { "type": "string" },
        "en": { "type": "string" }
      },
      "description": "Optional question description/help text"
    },
    "placeholder": {
      "type": "object",
      "properties": {
        "th": { "type": "string" },
        "en": { "type": "string" }
      },
      "description": "Placeholder text for input fields"
    },
    "options": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "value": { "type": "string" },
          "label": {
            "type": "object",
            "properties": {
              "th": { "type": "string" },
              "en": { "type": "string" }
            },
            "required": ["th"]
          },
          "description": {
            "type": "object",
            "properties": {
              "th": { "type": "string" },
              "en": { "type": "string" }
            }
          },
          "icon": { "type": "string" },
          "default": { "type": "boolean" }
        },
        "required": ["value", "label"]
      },
      "description": "Options for multiple choice questions"
    },
    "validation": {
      "type": "object",
      "properties": {
        "min": { "type": "number" },
        "max": { "type": "number" },
        "minLength": { "type": "number" },
        "maxLength": { "type": "number" },
        "pattern": { "type": "string" },
        "custom": { "type": "string" }
      },
      "description": "Validation rules"
    },
    "conditional": {
      "type": "object",
      "properties": {
        "dependsOn": { "type": "string" },
        "condition": {
          "type": "string",
          "enum": ["equals", "not_equals", "contains", "not_contains", "greater_than", "less_than"]
        },
        "value": { "type": "string" }
      },
      "description": "Conditional display logic"
    },
    "defaultValue": {
      "oneOf": [
        { "type": "string" },
        { "type": "number" },
        { "type": "boolean" },
        { "type": "array" }
      ],
      "description": "Default value for the question"
    },
    "smartDefaults": {
      "type": "object",
      "properties": {
        "basedOn": {
          "type": "array",
          "items": { "type": "string" }
        },
        "logic": { "type": "string" }
      },
      "description": "Smart default value logic"
    },
    "order": {
      "type": "number",
      "description": "Display order within the question set"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "tags": {
          "type": "array",
          "items": { "type": "string" }
        },
        "analytics": {
          "type": "object",
          "properties": {
            "skipRate": { "type": "number" },
            "averageTime": { "type": "number" },
            "popularAnswers": {
              "type": "array",
              "items": { "type": "string" }
            }
          }
        }
      }
    }
  },
  "required": ["id", "type", "text"]
}
