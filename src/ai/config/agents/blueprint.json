{
  "name": "blueprint",
  "description": "UI Template และ SpecBundle generator สำหรับ Create Loop",
  "model": "gpt-5-nano",
  "temperature": 0.1,
  "produces": [
    "UiTemplate",
    "UiTemplateVersion", 
    "SpecBundle",
    "SpecVersion"
  ],
  "consumes": [
    "Command"
  ],
  "schemas": {
    "command": "../schemas/command.schema.json",
    "spec": "../schemas/spec.schema.json",
    "template": "../schemas/template.schema.json"
  },
  "policies": {
    "qualityGates": "../policies/quality-gates.json",
    "escalation": "../policies/escalation.json",
    "interaction": "../policies/interaction.json"
  },
  "systemPrompt": "../../prompts/blueprint.system.md",
  "capabilities": [
    "ui_template_selection",
    "spec_bundle_creation", 
    "component_structure_design",
    "layout_optimization"
  ],
  "triggers": [
    "create_new_project",
    "change_ui_framework",
    "update_layout_structure"
  ],
  "features": {
    "templateRepository": {
      "type": "db",
      "connectionEnv": "DATABASE_URL",
      "collection": "ui_templates",
      "keyFields": [
        "id",
        "name",
        "framework",
        "layout",
        "components",
        "industry",
        "tags",
        "accessibilityScore",
        "responsiveScore",
        "popularity",
        "version",
        "status"
      ]
    },
    "queryMapping": {
      "framework": "command.preferences.framework",
      "layout": "command.preferences.layout",
      "industry": "command.context.industry",
      "tags": "command.keywords",
      "components": "command.requirements.components"
    },
    "rankingWeights": {
      "frameworkMatch": 0.35,
      "layoutFit": 0.2,
      "componentCoverage": 0.25,
      "accessibilityScore": 0.1,
      "responsiveScore": 0.05,
      "popularity": 0.05
    },
    "constraints": {
      "requireStatus": "approved",
      "minComponentCoverage": 0.8,
      "minAccessibilityScore": 0.8,
      "minResponsiveScore": 0.8
    },
    "fallbacks": {
      "steps": [
        { "relax": ["layoutFit"], "to": 0.6 },
        { "relax": ["componentCoverage"], "to": 0.6 },
        { "expand": ["industry"], "to": "related" }
      ],
      "maxFallbackDepth": 3,
      "generateNewIfNone": false
    },
    "output": {
      "return": "UiTemplate",
      "include": [
        "id",
        "name",
        "version",
        "framework",
        "layout",
        "components",
        "rationale",
        "scoreBreakdown"
      ],
      "explainSelection": true,
      "attachSpecBundle": true
    },
    "cache": {
      "maxCandidates": 20,
      "takeTopN": 3,
      "ttlSeconds": 600
    }
  }
}
